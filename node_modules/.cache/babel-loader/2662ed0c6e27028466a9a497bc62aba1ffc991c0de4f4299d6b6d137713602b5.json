{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shoobham\\\\Desktop\\\\New folder\\\\Urbansage\\\\src\\\\components\\\\Product\\\\comment.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./CommentsSection.css\"; // Import your custom CSS file here\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentsSection = _ref => {\n  _s();\n  let {\n    productId,\n    handleAddComment,\n    comments,\n    newComment,\n    setNewComment,\n    setComments\n  } = _ref;\n  const [users, setUsers] = useState({});\n  const [displayedComments, setDisplayedComments] = useState(3);\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const response = await axios.get(`http://localhost:4000/product/${productId}`);\n        const productData = response.data;\n        setComments(productData.comments);\n        console.log(productData.comments);\n        const userIds = productData.comments.map(comment => comment.userId);\n        fetchUsers(userIds);\n      } catch (error) {\n        console.error(\"Error fetching comments:\", error);\n      }\n    };\n    fetchComments();\n  }, [productId]);\n  const fetchUsers = async userIds => {\n    try {\n      const response = await axios.get(`http://localhost:4000/users?ids=${userIds.join(\",\")}`);\n      const usersData = response.data;\n      const usersMap = {};\n      usersData.forEach(user => {\n        usersMap[user._id] = user;\n      });\n      setUsers(usersMap);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n    }\n  };\n  const handleSeeMore = () => {\n    setDisplayedComments(displayedComments + 3);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comment-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), comments.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No comments yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-unstyled\",\n      children: comments.slice(0, displayedComments).map((comment, index) => {\n        var _users$comment$userId, _users$comment$userId2, _users$comment$userId3;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"comment-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comment-container\",\n            children: comment.userId && users[comment.userId] && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comment-user\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: (_users$comment$userId = users[comment.userId]) !== null && _users$comment$userId !== void 0 && _users$comment$userId.pic ? `http://localhost:4000/${users[comment.userId].pic.replace(\"\\\\\", \"/\")}` : \"default-profile-picture-url\",\n                alt: (_users$comment$userId2 = users[comment.userId]) === null || _users$comment$userId2 === void 0 ? void 0 : _users$comment$userId2.username,\n                className: \"user-profile-picture\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-details\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"username\",\n                  children: (_users$comment$userId3 = users[comment.userId]) === null || _users$comment$userId3 === void 0 ? void 0 : _users$comment$userId3.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"comment-text\",\n                children: comment.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this), comments.length > displayedComments && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary see-more-button\",\n      onClick: handleSeeMore,\n      children: \"See More\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: \"3\",\n        className: \"form-control\",\n        placeholder: \"Write your comment here...\",\n        value: newComment,\n        onChange: e => setNewComment(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary add-comment-button\",\n        onClick: () => handleAddComment(newComment),\n        children: \"Add Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentsSection, \"uTiNSazKNv9SzgPtYy5grpLOm80=\");\n_c = CommentsSection;\nexport default CommentsSection;\nvar _c;\n$RefreshReg$(_c, \"CommentsSection\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","CommentsSection","_ref","_s","productId","handleAddComment","comments","newComment","setNewComment","setComments","users","setUsers","displayedComments","setDisplayedComments","fetchComments","response","get","productData","data","console","log","userIds","map","comment","userId","fetchUsers","error","join","usersData","usersMap","forEach","user","_id","handleSeeMore","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","slice","index","_users$comment$userId","_users$comment$userId2","_users$comment$userId3","src","pic","replace","alt","username","text","onClick","rows","placeholder","value","onChange","e","target","_c","$RefreshReg$"],"sources":["C:/Users/Shoobham/Desktop/New folder/Urbansage/src/components/Product/comment.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./CommentsSection.css\"; // Import your custom CSS file here\r\n\r\nconst CommentsSection = ({ productId, handleAddComment, comments, newComment, setNewComment, setComments }) => {\r\n    const [users, setUsers] = useState({});\r\n    const [displayedComments, setDisplayedComments] = useState(3);\r\n  \r\n    useEffect(() => {\r\n      const fetchComments = async () => {\r\n        try {\r\n          const response = await axios.get(`http://localhost:4000/product/${productId}`);\r\n          const productData = response.data;\r\n  \r\n          setComments(productData.comments);\r\n          console.log(productData.comments);\r\n  \r\n          const userIds = productData.comments.map((comment) => comment.userId);\r\n          fetchUsers(userIds);\r\n        } catch (error) {\r\n          console.error(\"Error fetching comments:\", error);\r\n        }\r\n      };\r\n  \r\n      fetchComments();\r\n    }, [productId]);\r\n  \r\n    const fetchUsers = async (userIds) => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:4000/users?ids=${userIds.join(\",\")}`);\r\n        const usersData = response.data;\r\n  \r\n        const usersMap = {};\r\n  \r\n        usersData.forEach((user) => {\r\n          usersMap[user._id] = user;\r\n        });\r\n  \r\n        setUsers(usersMap);\r\n      } catch (error) {\r\n        console.error(\"Error fetching users:\", error);\r\n      }\r\n    };\r\n  \r\n    const handleSeeMore = () => {\r\n      setDisplayedComments(displayedComments + 3);\r\n    };\r\n\r\n  return (\r\n    <div className=\"comment-section\">\r\n      <h2>Comments</h2>\r\n      {comments.length === 0 ? (\r\n        <p>No comments yet.</p>\r\n      ) : (\r\n        <ul className=\"list-unstyled\">\r\n          {comments.slice(0, displayedComments).map((comment, index) => (\r\n            <li key={index} className=\"comment-item\">\r\n              <div className=\"comment-container\">\r\n                {comment.userId && users[comment.userId] && (\r\n                  <div className=\"comment-user\">\r\n                    <img\r\n                      src={\r\n                        users[comment.userId]?.pic\r\n                          ? `http://localhost:4000/${users[comment.userId].pic.replace(\"\\\\\", \"/\")}`\r\n                          : \"default-profile-picture-url\"\r\n                      }\r\n                      \r\n                      alt={users[comment.userId]?.username}\r\n                      className=\"user-profile-picture\"\r\n                    />\r\n                    <div className=\"user-details\">\r\n                      <p className=\"username\">{users[comment.userId]?.username}</p>\r\n                    </div>\r\n                    <p className=\"comment-text\">{comment.text}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {comments.length > displayedComments && (\r\n        <button className=\"btn btn-primary see-more-button\" onClick={handleSeeMore}>\r\n          See More\r\n        </button>\r\n      )}\r\n\r\n      <div className=\"comment-input\">\r\n        <textarea\r\n          rows=\"3\"\r\n          className=\"form-control\"\r\n          placeholder=\"Write your comment here...\"\r\n          value={newComment}\r\n          onChange={(e) => setNewComment(e.target.value)}\r\n        ></textarea>\r\n        <button className=\"btn btn-primary add-comment-button\" onClick={() => handleAddComment(newComment)}>\r\n          Add Comment\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentsSection;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}