{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shoobham\\\\Desktop\\\\New folder\\\\Urbansage\\\\src\\\\components\\\\Product\\\\comment.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./CommentsSection.css\"; // Import your custom CSS file here\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentsSection = _ref => {\n  _s();\n  let {\n    productId,\n    handleAddComment,\n    comments,\n    newComment,\n    setNewComment,\n    setComments\n  } = _ref;\n  const [users, setUsers] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [displayedComments, setDisplayedComments] = useState(3);\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const response = await axios.get(`http://localhost:4000/product/${productId}`);\n        const productData = response.data;\n        setComments(productData.comments);\n        const userIds = productData.comments.map(comment => comment.userId);\n        fetchUsers(userIds);\n      } catch (error) {\n        console.error(\"Error fetching comments:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchComments();\n  }, [productId]);\n  const fetchUsers = async userIds => {\n    try {\n      const response = await axios.get(`http://localhost:4000/users?ids=${userIds.join(\",\")}`);\n      const usersData = response.data;\n      const usersMap = {};\n      usersData.forEach(user => {\n        usersMap[user._id] = user;\n      });\n      setUsers(usersMap);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n    }\n  };\n  const handleSeeMore = () => {\n    setDisplayedComments(displayedComments + 3);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comment-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading comments...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this) : comments.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No comments yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-unstyled\",\n      children: comments.slice(0, displayedComments).map((comment, index) => {\n        var _users$comment$userId, _users$comment$userId2, _users$comment$userId3;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"comment-item\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comment-container\",\n            children: comment.userId && users[comment.userId] ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comment-user\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: (_users$comment$userId = users[comment.userId]) !== null && _users$comment$userId !== void 0 && _users$comment$userId.pic ? `http://localhost:4000/${users[comment.userId].pic.replace(\"\\\\\", \"/\")}` : \"default-profile-picture-url\",\n                alt: (_users$comment$userId2 = users[comment.userId]) === null || _users$comment$userId2 === void 0 ? void 0 : _users$comment$userId2.username,\n                className: \"user-profile-picture\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-details\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"username\",\n                  children: (_users$comment$userId3 = users[comment.userId]) === null || _users$comment$userId3 === void 0 ? void 0 : _users$comment$userId3.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"comment-text\",\n                children: comment.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Loading user data...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), comments.length > displayedComments && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary see-more-button\",\n      onClick: handleSeeMore,\n      children: \"See More\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: \"3\",\n        className: \"form-control\",\n        placeholder: \"Write your comment here...\",\n        value: newComment,\n        onChange: e => setNewComment(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary add-comment-button\",\n        onClick: () => handleAddComment(newComment),\n        children: \"Add Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentsSection, \"SZvu1lkOLYU5ZjYvaJQwTqa7sJE=\");\n_c = CommentsSection;\nexport default CommentsSection;\nvar _c;\n$RefreshReg$(_c, \"CommentsSection\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","CommentsSection","_ref","_s","productId","handleAddComment","comments","newComment","setNewComment","setComments","users","setUsers","isLoading","setIsLoading","displayedComments","setDisplayedComments","fetchComments","response","get","productData","data","userIds","map","comment","userId","fetchUsers","error","console","join","usersData","usersMap","forEach","user","_id","handleSeeMore","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","slice","index","_users$comment$userId","_users$comment$userId2","_users$comment$userId3","src","pic","replace","alt","username","text","onClick","rows","placeholder","value","onChange","e","target","_c","$RefreshReg$"],"sources":["C:/Users/Shoobham/Desktop/New folder/Urbansage/src/components/Product/comment.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./CommentsSection.css\"; // Import your custom CSS file here\r\n\r\nconst CommentsSection = ({ productId, handleAddComment, comments, newComment, setNewComment, setComments }) => {\r\n  const [users, setUsers] = useState({});\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [displayedComments, setDisplayedComments] = useState(3);\r\n\r\n  useEffect(() => {\r\n    const fetchComments = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:4000/product/${productId}`);\r\n        const productData = response.data;\r\n\r\n        setComments(productData.comments);\r\n\r\n        const userIds = productData.comments.map((comment) => comment.userId);\r\n        fetchUsers(userIds);\r\n      } catch (error) {\r\n        console.error(\"Error fetching comments:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchComments();\r\n  }, [productId]);\r\n\r\n  const fetchUsers = async (userIds) => {\r\n    try {\r\n      const response = await axios.get(`http://localhost:4000/users?ids=${userIds.join(\",\")}`);\r\n      const usersData = response.data;\r\n\r\n      const usersMap = {};\r\n\r\n      usersData.forEach((user) => {\r\n        usersMap[user._id] = user;\r\n      });\r\n\r\n      setUsers(usersMap);\r\n    } catch (error) {\r\n      console.error(\"Error fetching users:\", error);\r\n    }\r\n  };\r\n\r\n  const handleSeeMore = () => {\r\n    setDisplayedComments(displayedComments + 3);\r\n  };\r\n\r\n  return (\r\n    <div className=\"comment-section\">\r\n      <h2>Comments</h2>\r\n      {isLoading ? (\r\n        <p>Loading comments...</p>\r\n      ) : comments.length === 0 ? (\r\n        <p>No comments yet.</p>\r\n      ) : (\r\n        <ul className=\"list-unstyled\">\r\n          {comments.slice(0, displayedComments).map((comment, index) => (\r\n            <li key={index} className=\"comment-item\">\r\n              <div className=\"comment-container\">\r\n                {comment.userId && users[comment.userId] ? (\r\n                  <div className=\"comment-user\">\r\n                    <img\r\n                      src={\r\n                        users[comment.userId]?.pic\r\n                          ? `http://localhost:4000/${users[comment.userId].pic.replace(\"\\\\\", \"/\")}`\r\n                          : \"default-profile-picture-url\"\r\n                      }\r\n                      alt={users[comment.userId]?.username}\r\n                      className=\"user-profile-picture\"\r\n                    />\r\n                    <div className=\"user-details\">\r\n                      <p className=\"username\">{users[comment.userId]?.username}</p>\r\n                    </div>\r\n                    <p className=\"comment-text\">{comment.text}</p>\r\n                  </div>\r\n                ) : (\r\n                  <p>Loading user data...</p>\r\n                )}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {comments.length > displayedComments && (\r\n        <button className=\"btn btn-primary see-more-button\" onClick={handleSeeMore}>\r\n          See More\r\n        </button>\r\n      )}\r\n\r\n      <div className=\"comment-input\">\r\n        <textarea\r\n          rows=\"3\"\r\n          className=\"form-control\"\r\n          placeholder=\"Write your comment here...\"\r\n          value={newComment}\r\n          onChange={(e) => setNewComment(e.target.value)}\r\n        ></textarea>\r\n        <button className=\"btn btn-primary add-comment-button\" onClick={() => handleAddComment(newComment)}>\r\n          Add Comment\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentsSection;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}